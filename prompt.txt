あなたは熟練のフロントエンドエンジニアです。
これから与える設計情報に基づき、HTML/CSS/JavaScript だけで完結する
「東証プライム全銘柄分析システム」のフロントエンド実装を行ってください。

# 前提

- バックエンドであらかじめ `data.json` が生成されている。
- フロントエンドは以下のファイルで構成する。
  - `index.html`
  - `style.css`
  - `index.js`
- これらを GitHub Pages で公開することを想定する。

`data.json` の構造は次の通りである。

- ルートには `"data"` という配列が1つある。
- `data` の各要素は次のプロパティを持つオブジェクトである。

  - `code` : String（証券コード）
  - `name` : String（企業名）
  - `currentPrice` : Number（現在価格）
  - `predictPrice` : Number（予想価格）
  - `profitRatio` : Number（利益率）
  - `recommendation` : String（推奨度カテゴリ："BUY" / "HOLD" / "SELL" など）
  - `reasonsForRecommendation` : String（推奨理由の文章）

フロントエンドはこの `data.json` を読み込み、画面描画とインタラクションだけを担当する。

# 画面仕様（レイアウト・UI）

全体の共通仕様:

- 表示は html 1 枚のシングルカラム構成とする。
- 最大幅: 1920px（`main` タグ内）
- 想定解像度: 1920 × 1080px（デスクトップ）
- 対応ブラウザ: Google Chrome（最新版推奨）
- 対応 OS: Windows
- フォント: `メイリオ, Meiryo, sans-serif`
- body の基本背景色: `#f4f4f4`
- ナビ色変更: `body` の `class` を切り替えることでページごとに配色変更する。
- カード hover 時: `transform: scale(1.03)` のアニメーションを付与する。
- 表示切替として「モーダル」「ローディング」「エラー表示」が存在する。

ページ構造:

- 固定ヘッダー（section に応じて色が変化）
- 固定ナビゲーションバー（ヘッダーの直下に位置し、セクションに応じて色が変化）
- メインコンテンツ（上マージン約 100px、横幅最大 1920px、padding 20px）
- セクションはスクロールしたときに上から順に表示される:
  1. 分析統計情報（id: `statistics`）
  2. 特におすすめの 3 銘柄
  3. その他おすすめ銘柄
  4. 全銘柄一覧（id: `all`）
  5. 注意事項（id: `notice`）

## ヘッダー

- 高さ: 約 50px（`padding:15px` + 文字サイズ）
- 位置: `position: fixed; top: 0;`
- 背景色: CSS カスタムプロパティ `var(--header-bg)` を用い、セクションに応じて変更する。
  - 統計情報セクション: `--header-bg: #6A5ACD;`（パープル）
  - おすすめ銘柄セクション: `--header-bg: #0cb171;`（グリーン）
  - 全銘柄一覧セクション: `--header-bg: #4A4A4A;`（ダークグレー）
- 文字色: `#fff`
- 内容: システム名「東証プライム全銘柄分析システム」を表示する。

## ナビゲーションバー

- 高さ: 約 50px（`padding:15px`）
- 位置: `position: fixed; top: 50px;`
- 背景色: CSS カスタムプロパティ `var(--nav-bg)` を用い、セクションに応じて変更する。
  - 統計情報セクション: `--nav-bg: #5A4EBE;`（パープル）
  - おすすめ銘柄セクション: `--nav-bg: #0a8d57;`（グリーン）
  - 全銘柄一覧セクション: `--nav-bg: #3A3A3A;`（ダークグレー）
- ナビゲーションリンク数: 3つ
  - 「統計情報」 → `#statistics`
  - 「おすすめ銘柄」 → おすすめセクション
  - 「全銘柄一覧」 → `#all`
- active 状態のリンク:
  - `opacity: 0.6`
  - `pointer-events: none`（クリック無効）
- スクロールやナビでの移動に応じて、現在表示中セクションに合わせて
  - ヘッダーとナビゲーションの色を変更
  - 選択中のナビリンクの文字を薄くする（active クラス付与）

## メインコンテンツ

- `margin-top: 100px;`（ヘッダー + ナビ分）
- 最大幅: 1920px
- `padding: 20px`

セクションごとの仕様:

1. 分析統計情報（`#statistics`）
   - BUY 推奨銘柄数:
     - 背景: `#e6f9f0`
     - 文字色: `#00875a`
     - 枠線: `2px solid #004a19`
   - SELL 推奨銘柄数:
     - 背景: `#ffeaea`
     - 文字色: `#d43d3d`
     - 枠線: `2px solid #824b4b`
   - HOLD 推奨銘柄数:
     - 背景: `#f9fadb`
     - 文字色: `#a89a00`
     - 枠線: `2px solid #898900`
   - 他に表示する項目:
     - 分析銘柄数
     - 平均上昇率（平均利益率）
   - 表示形式:
     - 「カード形式」で表示
     - カードは可変サイズ（例: `flex: 1; min-width: 150px;`）で横並びレイアウトとする。

2. おすすめ銘柄（`#recommend`）
   - 「特におすすめ 3 銘柄」
     - カードサイズ: `width: 240px; height: 120px;`
     - 配置: Flex レイアウト（`gap: 20px`）
     - 操作: カードクリックでモーダル表示
   - 「その他おすすめ銘柄」
     - カード数: 最大 12個
     - 内容: 企業名と推奨理由（オプション）
   - いずれのカードも、クリックするとその銘柄の詳細モーダルを表示する。

3. 全銘柄一覧（`#all`）
   - 表示形式: テーブル
   - 各行のカラム:
     - 企業名
     - 証券コード
     - 現在価格
     - 予想価格
     - 利益率
     - 推奨度
   - 行をクリック（`<tr>`クリック）すると、その銘柄の詳細モーダルを表示する。
   - テーブルスタイル:
     - `border-collapse: separate;`
     - `border-spacing: 0 8px;`
     - 行 hover 時: `transform: translateY(-2px);` で浮き上がる演出
     - BUY セル:
       - 背景: `#e6f9f0`
       - 文字色: `#00875a`
     - SELL セル:
       - 背景: `#ffeaea`
       - 文字色: `#d43d3d`
     - HOLD セル:
       - 背景: `#fcffd2`
       - 文字色: `#958d00`

4. モーダル
   - 表示形式: `display: flex; align-items: center; justify-content: center;`
   - サイズ: `width: 300px;`
   - 背景色: `#fff`
   - 影: `box-shadow: 0 0 12px rgba(0, 0, 0, 0.4)`
   - 右上に × ボタンを配置し、クリックでモーダルを閉じる。
   - 表示内容:
     - 企業名
     - 証券コード
     - 現在価格
     - 予想価格
     - 利益率
     - 推奨度
     - 推奨度になった理由（`reasonsForRecommendation`）

5. 注意事項（`#notice`）
   - 背景色: `#fff0f0`
   - 内容: 以下の注意書きテキストをページ最下部に表示する。

     ⚠️ 重要な注意事項: この分析結果は過去のデータと統計的手法に基づく参考情報です。
     実際の投資判断は必ずご自身の責任で行い、複数の情報源を参考にしてください。
     株式投資にはリスクが伴い、元本割れの可能性があります。

# JavaScript の処理要件（関数仕様）

`index.js` では、設計書にある以下の処理を実装する。

1. 「描写データ取得」プロセス
   - ページアクセス時に `data.json` を fetch で読み込む。
   - 読み取れたデータを以下の関数に渡して実行する。
     - 「総合評価表示」関数
     - 「各銘柄テーブル処理」関数
   - 取得に失敗した場合は、「エラー描写」関数を用いてエラー表示を行う。

2. 「総合評価表示」関数
   - `data.json` から以下の情報を集計し、統計情報セクションのカードに反映する。
     - 総銘柄数
     - 推奨度 "BUY" となった銘柄の総数
     - 推奨度 "HOLD" の総数
     - 推奨度 "SELL" の総数
     - 平均利益率（全銘柄の `profitRatio` を合算し、総銘柄数で割る）

3. 「各銘柄テーブル処理」関数
   - 引数として `id`（対象テーブルまたはコンテナの識別子）とデータ配列を受け取る。
   - 対象に応じて以下の動作を行う。

   (a) 特におすすめ銘柄テーブル／その他おすすめ銘柄テーブルの場合
   - `recommendation` が "BUY" の銘柄のみ抽出する。
   - `profitRatio` が高い順にソートする。
   - 上位 1〜3位を「特におすすめ 3 銘柄」としてカード表示する。
   - 4〜15位を「その他おすすめ銘柄」としてカード表示する（最大 12 件）。
   - カードクリック時に「モーダル表示」関数を呼び出す。
   - "BUY" 銘柄が最大表示可能数に満たない場合は、存在する分だけ描画する。
   - "BUY" 銘柄が 1 つもない場合は何も追加せず、空レイアウトとする。

   (b) 全銘柄テーブルの場合
   - すべての銘柄を、企業名をあいうえお順にソートする。
   - テーブルに各銘柄情報を追加する。
   - `recommendation` に応じて、セルに対応するクラス（BUY/HOLD/SELL）を付与する。
   - 行クリック時に「モーダル表示」関数を呼び出す。

4. 「モーダル表示」関数
   - 引数として銘柄の情報オブジェクトを受け取る。
   - 既存のモーダルの中身をクリアし、銘柄情報を書き込む。
   - モーダル要素の `display` プロパティを変更して表示する。
   - モーダル内の × ボタンをクリックしたとき、「モーダル非表示」関数を呼び出す。

5. 「モーダル非表示」関数
   - モーダル要素の `display` プロパティを変更して非表示にする。

6. 「エラー描写」関数
   - 初期状態では非表示となっているエラー用のタグを取得する。
   - `display` プロパティを変更してエラーを画面上に表示する。
   - 可能であれば、エラー内容メッセージを表示する。

7. 「ページ位置に応じた画面カラー変更」プロセス
   - `window` のスクロールイベントリスナーを設定する。
   - スクロールが生じるたびに「body タグ割り当てクラス変更」関数を実行する。
   - 画面で描写されている要素のうち、各セクションの上端が `150px` より上に来たタイミングで、
     そのセクションを「現在のセクション」と判定し、ヘッダー・ナビ・body class を対応する色に変更する。

8. 「body タグ割り当てクラス変更」関数
   - 現在のセクションを表す識別子（例: "statistics", "recommend", "all"）を受け取る。
   - `body` に割り当てられている class が現在のセクションと異なる場合、
     対応するクラスに変更する（例: `body.className = "section-statistics"` など）。
   - クラスに応じて `--header-bg` や `--nav-bg` の値が変わるように CSS を設計する。
   - ナビゲーションリンクにも active クラスを付与し、選択中のセクションを視覚的に示す。

# 実装上の制約・方針

- JavaScript はプレーンな ES2015+ を想定し、フレームワークは使用しない。
- 外部ライブラリ（CSS フレームワークや JS ライブラリ）は使用しない。
- `fetch("data.json")` を利用して JSON を取得する。
- アクセシビリティと可読性を意識した HTML 構造とクラス命名を行う。
- CSS は BEM やシンプルな命名規則を用いて、複雑になりすぎないようにする。
- 適宜コメントを入れ、どの関数が設計書のどのプロセスに対応しているかを示す。

# 出力形式

- 完成したソースコードのみを出力すること。
- `index.html`, `style.css`, `index.js` の3ファイル分を1つの回答に含める。
- 各ファイルの先頭に以下のようなコメントを書いて区切ること:

```html
  <!-- file: index.html -->
````

```css
/* file: style.css */
```

```js
// file: index.js
```

* 上記コメントを用いて、1つの回答の中で3ファイルの内容を明確に区別すること。
* 回答内にはソースコード以外の説明文は書かないこと。
